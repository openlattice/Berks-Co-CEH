#change limit for prod: select * from incomebenefits limit 5000;

entityDefinitions:
  client:
    fqn: "general.person"
    entitySetName: "BerksCEHClients"
    propertyDefinitions:
      nc.SubjectIdentification:
        type: "nc.SubjectIdentification"
        column: "PersonalID"
      ol.datasource:
        type: "ol.datasource"
        transforms:
        - !<transforms.ValueTransform>
          value: "Berks County CEH"
    conditions:
    - !<conditions.BooleanIsNullCondition>
      column: "PersonalID"
      reverse: false
    name: "client"


  medicaid: 
    fqn: "ol.insurance"
    entitySetName: "BerksCEHMedicaid"
    propertyDefinitions: 
      general.id: 
        type: "general.id"
        column: "IncomeBenefitsID"
      ol.organizationname:
        type: "ol.organizationname"
        transforms:
        - !<transforms.ValueTransform> 
          value: "Medicaid"
      ol.notes: 
        type: "ol.notes"
        column: "NoMedicaidReason"
        transforms:
        - !<transforms.ParseIntTransform> {}
        - !<transforms.ReplaceTransform>
          target: ["1", "2", "3", "4", "8", "9", "99"]
          goal: ["Applied; decision pending", "Applied; client not eligible", "Client did not apply", "Insurance type n/a for this client", "Client doesn't know", "Client refused", "Data not collected"]
          ignoreCase: true
    conditions:
    - !<conditions.ConditionalOr> {} 
    - !<conditions.BooleanRegexCondition>
      column: "Medicaid"
      pattern: "1"
      reverse: false
    - !<conditions.BooleanIsNullCondition>
      column: "NoMedicaidReason"
      reverse: true
    name: "medicaid"

  medicare: 
    fqn: "ol.insurance"
    entitySetName: "BerksCEHMedicare"
    propertyDefinitions: 
      general.id: 
        type: "general.id"
        column: "IncomeBenefitsID"
      ol.organizationname:
        type: "ol.organizationname"
        transforms:
        - !<transforms.ValueTransform> 
          value: "Medicare"
      ol.notes: 
        type: "ol.notes"
        column: "NoMedicareReason"
        transforms:
        - !<transforms.ParseIntTransform> {}
        - !<transforms.ReplaceTransform>
          target: ["1", "2", "3", "4", "8", "9", "99"]
          goal: ["Applied; decision pending", "Applied; client not eligible", "Client did not apply", "Insurance type n/a for this client", "Client doesn't know", "Client refused", "Data not collected"]
          ignoreCase: true
    conditions:
    - !<conditions.ConditionalOr> {} 
    - !<conditions.BooleanRegexCondition>
      column: "Medicare"
      pattern: "1"
      reverse: false
    - !<conditions.BooleanIsNullCondition>
      column: "NoMedicareReason"
      reverse: true        
    name: "medicare"

  schip: 
    fqn: "ol.insurance"
    entitySetName: "BerksCEHSCHIP"
    propertyDefinitions: 
      general.id: 
        type: "general.id"
        column: "IncomeBenefitsID"
      ol.organizationname:
        type: "ol.organizationname"
        transforms:
        - !<transforms.ValueTransform> 
          value: "Healthy Kids (CHI) (State Children's HIP)"
      ol.notes: 
        type: "ol.notes"
        column: "NoSCHIPReason"
        transforms:
        - !<transforms.ParseIntTransform> {}
        - !<transforms.ReplaceTransform>
          target: ["1", "2", "3", "4", "8", "9", "99"]
          goal: ["Applied; decision pending", "Applied; client not eligible", "Client did not apply", "Insurance type n/a for this client", "Client doesn't know", "Client refused", "Data not collected"]
          ignoreCase: true
    conditions:
    - !<conditions.ConditionalOr> {} 
    - !<conditions.BooleanRegexCondition>
      column: "SCHIP"
      pattern: "1"
      reverse: false
    - !<conditions.BooleanIsNullCondition>
      column: "NoSCHIPReason"
      reverse: true
    name: "schip"

  vamedicalservices: 
    fqn: "ol.insurance"
    entitySetName: "BerksCEHVAMedicalServices"
    propertyDefinitions: 
      general.id: 
        type: "general.id"
        column: "IncomeBenefitsID"
      ol.organizationname:
        type: "ol.organizationname"
        transforms:
        - !<transforms.ValueTransform> 
          value: "VA Medical Services"
      ol.notes: 
        type: "ol.notes"
        column: "NoVAMedReason"
        transforms:
        - !<transforms.ParseIntTransform> {}
        - !<transforms.ReplaceTransform>
          target: ["1", "2", "3", "4", "8", "9", "99"]
          goal: ["Applied; decision pending", "Applied; client not eligible", "Client did not apply", "Insurance type n/a for this client", "Client doesn't know", "Client refused", "Data not collected"]
          ignoreCase: true
    conditions: 
    - !<conditions.ConditionalOr> {}
    - !<conditions.BooleanRegexCondition>
      column: "VAMedicalServices"
      pattern: "1"
      reverse: false
    - !<conditions.BooleanIsNullCondition>
      column: "NoVAMedReason"
      reverse: true
    name: "vamedicalservices"

  employerprovidedinsurance: 
    fqn: "ol.insurance"
    entitySetName: "BerksCEHEmployerProvidedInsurance"
    propertyDefinitions: 
      general.id: 
        type: "general.id"
        column: "IncomeBenefitsID"
      ol.organizationname:
        type: "ol.organizationname"
        transforms:
        - !<transforms.ValueTransform> 
          value: "Employer Provided"
      ol.notes:
        type: "ol.notes"
        column: "NoEmployerProvidedReason"
        transforms:
        - !<transforms.ParseIntTransform> {}
        - !<transforms.ReplaceTransform>
          target: ["1", "2", "3", "4", "8", "9", "99"]
          goal: ["Applied; decision pending", "Applied; client not eligible", "Client did not apply", "Insurance type n/a for this client", "Client doesn't know", "Client refused", "Data not collected"]
          ignoreCase: true
    conditions:
    - !<conditions.ConditionalOr> {} 
    - !<conditions.BooleanRegexCondition>
      column: "EmployerProvided"
      pattern: "1"
      reverse: false
    - !<conditions.BooleanIsNullCondition>
      column: "NoEmployerProvidedReason"
      reverse: true
    name: "employerprovidedinsurance"

  cobrainsurance: 
    fqn: "ol.insurance"
    entitySetName: "BerksCEHCOBRAInsurance"
    propertyDefinitions: 
      general.id: 
        type: "general.id"
        column: "IncomeBenefitsID"
      ol.organizationname:
        type: "ol.organizationname"
        transforms:
        - !<transforms.ValueTransform> 
          value: "COBRA"
      ol.notes: 
        type: "ol.notes"
        column: "NoCOBRAReason"
        transforms:
        - !<transforms.ParseIntTransform> {}
        - !<transforms.ReplaceTransform>
          target: ["1", "2", "3", "4", "8", "9", "99"]
          goal: ["Applied; decision pending", "Applied; client not eligible", "Client did not apply", "Insurance type n/a for this client", "Client doesn't know", "Client refused", "Data not collected"]
          ignoreCase: true
    conditions:
    - !<conditions.ConditionalOr> {} 
    - !<conditions.BooleanRegexCondition>
      column: "COBRA"
      pattern: "1"
      reverse: false
    - !<conditions.BooleanIsNullCondition>
      column: "NoCOBRAReason"
      reverse: true
    name: "cobrainsurance"

  privatepay: 
    fqn: "ol.insurance"
    entitySetName: "BerksCEHPrivatePay"
    propertyDefinitions: 
      general.id: 
        type: "general.id"
        column: "IncomeBenefitsID"
      ol.organizationname:
        type: "ol.organizationname"
        transforms:
        - !<transforms.ValueTransform> 
          value: "Private Pay Insurance"
      ol.notes: 
        type: "ol.notes"
        column: "NoPrivatePayReason"
        transforms:
        - !<transforms.ParseIntTransform> {}
        - !<transforms.ReplaceTransform>
          target: ["1", "2", "3", "4", "8", "9", "99"]
          goal: ["Applied; decision pending", "Applied; client not eligible", "Client did not apply", "Insurance type n/a for this client", "Client doesn't know", "Client refused", "Data not collected"]
          ignoreCase: true
    conditions:
    - !<conditions.ConditionalOr> {} 
    - !<conditions.BooleanRegexCondition>
      column: "PrivatePay"
      pattern: "1"
      reverse: false
    - !<conditions.BooleanIsNullCondition>
      column: "NoPrivatePayReason"
      reverse: true
    name: "privatepay"

  statehealthinsurance: 
    fqn: "ol.insurance"
    entitySetName: "BerksCEHStateHealthInsurance"
    propertyDefinitions: 
      general.id: 
        type: "general.id"
        column: "IncomeBenefitsID"
      ol.organizationname:
        type: "ol.organizationname"
        transforms:
        - !<transforms.ValueTransform> 
          value: "State Health Insurance"
      ol.notes: 
        type: "ol.notes"
        column: "NoStateHealthInsReason"
        transforms:
        - !<transforms.ParseIntTransform> {}
        - !<transforms.ReplaceTransform>
          target: ["1", "2", "3", "4", "8", "9", "99"]
          goal: ["Applied; decision pending", "Applied; client not eligible", "Client did not apply", "Insurance type n/a for this client", "Client doesn't know", "Client refused", "Data not collected"]
          ignoreCase: true
    conditions:
    - !<conditions.ConditionalOr> {} 
    - !<conditions.BooleanRegexCondition>
      column: "StateHealthIns"
      pattern: "1"
      reverse: false
    - !<conditions.BooleanIsNullCondition>
      column: "NoStateHealthInsReason"
      reverse: true
    name: "statehealthinsurance"

  indianhealthservices: 
    fqn: "ol.insurance"
    entitySetName: "BerksCEHIndianHealthServicesInsurance"
    propertyDefinitions: 
      general.id: 
        type: "general.id"
        column: "IncomeBenefitsID"
      ol.organizationname:
        type: "ol.organizationname"
        transforms:
        - !<transforms.ValueTransform> 
          value: "Indian Health Services"
      ol.notes: 
        type: "ol.notes"
        column: "NoStateHealthInsReason"
        transforms:
        - !<transforms.ParseIntTransform> {}
        - !<transforms.ReplaceTransform>
          target: ["1", "2", "3", "4", "8", "9", "99"]
          goal: ["Applied; decision pending", "Applied; client not eligible", "Client did not apply", "Insurance type n/a for this client", "Client doesn't know", "Client refused", "Data not collected"]
          ignoreCase: true
    conditions:
    - !<conditions.ConditionalOr> {} 
    - !<conditions.BooleanRegexCondition>
      column: "IndianHealthServices"
      pattern: "1"
      reverse: false
    - !<conditions.BooleanIsNullCondition>
      column: "NoStateHealthInsReason"
      reverse: true
    name: "indianhealthservices"

  otherinsurance: 
    fqn: "ol.insurance"
    entitySetName: "BerksCEHOtherInsurances"
    propertyDefinitions: 
      general.id: 
        type: "general.id"
        column: "IncomeBenefitsID"
      ol.organizationname:
        type: "ol.organizationname"
        column: "OtherInsuranceIdentify"
    conditions:
    - !<conditions.ConditionalOr> {}
    - !<conditions.BooleanRegexCondition>
      column: "OtherInsurance"
      pattern: "1"
      reverse: false
    - !<conditions.BooleanIsNullCondition>
      column: "OtherInsuranceIdentify"
      reverse: true
    name: "otherinsurance"
      
  connectionwithsoarinsurance: 
    fqn: "ol.insurance"
    entitySetName: "BerksCEHConnectionWithSOARInsurance"
    propertyDefinitions: 
      general.id: 
        type: "general.id"
        column: "IncomeBenefitsID"
      ol.organizationname:
        type: "ol.organizationname"
        transforms:
        - !<transforms.ValueTransform> 
          value: "Connection With SOAR"
    conditions:
    - !<conditions.BooleanRegexCondition>
      column: "ConnectionWithSOAR"
      pattern: "1"
      reverse: false
    name: "connectionwithsoarinsurance"

associationDefinitions: 
  insuredby1: 
    fqn: "health.insuredby"
    entitySetName: "BerksInsuredby"
    src: "client"
    dst: "medicare"
    propertyDefinitions: 
      date.completeddatetime: 
        type: "date.completeddatetime"
        column: "InformationDate"
        transforms:
        - !<transforms.DateTimeTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd HH:mm:ss.S"]
    name: "insuredby1"

  insuredby2: 
    fqn: "health.insuredby"
    entitySetName: "BerksInsuredby"
    src: "client"
    dst: "medicaid"
    propertyDefinitions: 
      date.completeddatetime: 
        type: "date.completeddatetime"
        column: "InformationDate"
        transforms:
        - !<transforms.DateTimeTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd HH:mm:ss.S"]
    name: "insuredby2"

  insuredby3: 
    fqn: "health.insuredby"
    entitySetName: "BerksInsuredby"
    src: "client"
    dst: "schip"
    propertyDefinitions: 
      date.completeddatetime: 
        type: "date.completeddatetime"
        column: "InformationDate"
        transforms:
        - !<transforms.DateTimeTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd HH:mm:ss.S"]
    name: "insuredby3"

  insuredby4: 
    fqn: "health.insuredby"
    entitySetName: "BerksInsuredby"
    src: "client"
    dst: "vamedicalservices"
    propertyDefinitions: 
      date.completeddatetime: 
        type: "date.completeddatetime"
        column: "InformationDate"
        transforms:
        - !<transforms.DateTimeTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd HH:mm:ss.S"]
    name: "insuredby4"

  insuredby5: 
    fqn: "health.insuredby"
    entitySetName: "BerksInsuredby"
    src: "client"
    dst: "employerprovidedinsurance"
    propertyDefinitions: 
      date.completeddatetime: 
        type: "date.completeddatetime"
        column: "InformationDate"
        transforms:
        - !<transforms.DateTimeTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd HH:mm:ss.S"]
    name: "insuredby5"

  insuredby6: 
    fqn: "health.insuredby"
    entitySetName: "BerksInsuredby"
    src: "client"
    dst: "cobrainsurance"
    propertyDefinitions: 
      date.completeddatetime: 
        type: "date.completeddatetime"
        column: "InformationDate"
        transforms:
        - !<transforms.DateTimeTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd HH:mm:ss.S"]
    name: "insuredby6"

  insuredby7: 
    fqn: "health.insuredby"
    entitySetName: "BerksInsuredby"
    src: "client"
    dst: "privatepay"
    propertyDefinitions: 
      date.completeddatetime: 
        type: "date.completeddatetime"
        column: "InformationDate"
        transforms:
        - !<transforms.DateTimeTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd HH:mm:ss.S"]
    name: "insuredby7"

  insuredby8: 
    fqn: "health.insuredby"
    entitySetName: "BerksInsuredby"
    src: "client"
    dst: "statehealthinsurance"
    propertyDefinitions: 
      date.completeddatetime: 
        type: "date.completeddatetime"
        column: "InformationDate"
        transforms:
        - !<transforms.DateTimeTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd HH:mm:ss.S"]
    name: "insuredby8"

  insuredby9: 
    fqn: "health.insuredby"
    entitySetName: "BerksInsuredby"
    src: "client"
    dst: "indianhealthservices"
    propertyDefinitions: 
      date.completeddatetime: 
        type: "date.completeddatetime"
        column: "InformationDate"
        transforms:
        - !<transforms.DateTimeTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd HH:mm:ss.S"]
    name: "insuredby9"

  insuredby10: 
    fqn: "health.insuredby"
    entitySetName: "BerksInsuredby"
    src: "client"
    dst: "otherinsurance"
    propertyDefinitions: 
      date.completeddatetime: 
        type: "date.completeddatetime"
        column: "InformationDate"
        transforms:
        - !<transforms.DateTimeTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd HH:mm:ss.S"]
    name: "insuredby10"

  insuredby11: 
    fqn: "health.insuredby"
    entitySetName: "BerksInsuredby"
    src: "client"
    dst: "connectionwithsoarinsurance"
    propertyDefinitions: 
      date.completeddatetime: 
        type: "date.completeddatetime"
        column: "InformationDate"
        transforms:
        - !<transforms.DateTimeTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd HH:mm:ss.S"]
    name: "insuredby11"
